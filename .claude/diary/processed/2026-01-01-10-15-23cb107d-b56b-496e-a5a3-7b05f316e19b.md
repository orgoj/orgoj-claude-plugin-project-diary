# Session Diary

**Date**: 2026-01-01 10:15
**Session ID**: 23cb107d-b56b-496e-a5a3-7b05f316e19b
**Project**: /home/michael/work/ai/CLAUDE/marketplaces/orgoj-claude-plugin-project-diary
**Git Branch**: master

## Task Summary

Uživatel identifikoval koncepční problém: `diary-generator.js` generoval soubory pro context recovery (po compact), ale nazývalo se to "diary" - což bylo matoucí, protože skutečné diary jsou ruční záznamy vytvořené příkazem `/diary`. Cílem bylo jasně oddělit tyto dva různé koncepty.

## Work Done

- Přejmenoval `hooks/diary-generator.js` na `hooks/recovery-generator.js`
- Změnil výstupní adresář z `.claude/diary/` na `.claude/diary/recovery/`
- Aktualizoval `diary-hook.sh` pro volání recovery-generator a načítání z recovery/
- Změnil XML tag z `<diary-context>` na `<recovery-context>`
- Přidal parametr `include recovery` do `/reflect` commandu
- Aktualizoval README.md s jasným vysvětlením rozdílu recovery vs diary
- Zvýšil verzi na 1.4.0
- Aktualizoval CHANGELOG.md s BREAKING CHANGE

## Design Decisions

- **Přístup A (adresář pod diary/)**: Zvoleno `.claude/diary/recovery/` místo úplného oddělení `.claude/recovery/` - recovery koncepčně patří k diary systému, jen je generované automaticky
- **Default pro /reflect**: Analyzuje pouze ruční diary, recovery na vyžádání (`include recovery`) - ruční diary obsahují reflexe a insights, recovery jsou jen surová data pro context restoration

## Challenges & Solutions

| Challenge | Solution |
|-----------|----------|
| Jak pojmenovat oddělené koncepty | "Recovery" pro auto-generované (context restoration), "Diary" pro ruční (dokumentace session) |
| Kam ukládat recovery soubory | `.claude/diary/recovery/` - hierarchicky pod diary, ale jasně oddělené |

## User Preferences Observed

### Git & PR Preferences:
- Verze zvýšit PŘED commitem
- CHANGELOG aktualizovat PŘED commitem
- Conventional commits (feat:, fix:)

### Code Quality Preferences:
- Použití TodoWrite pro sledování postupu
- Podrobný plán před implementací (brainstorming skill)

### Technical Preferences:
- Jasné oddělení konceptů v kódu i dokumentaci
- BREAKING změny jasně označit v CHANGELOG

## Code Patterns Used

- XML tagy pro kontext v hook output (`<session-info>`, `<recovery-context>`)
- Frontmatter v markdown souborech pro metadata
- Parametrické příkazy s více možnostmi (`include recovery`, `include processed`)

## Notes

- Existující soubory v `.claude/diary/` vytvořené hooky nebudou automaticky přesunuty
- Nové recovery soubory budou vytvářeny v `.claude/diary/recovery/`
- Verze 1.4.0 je BREAKING změna kvůli změně struktury
